window.addEventListener("load",()=>{const e=document.querySelector(".collection-box-slider-track"),t=document.querySelectorAll(".slide"),n=document.querySelector(".collection-box-arrows-left"),c=document.querySelector(".collection-box-arrows-right"),o=t[0].getBoundingClientRect().width+20,r=1;let l=0;function s(){const s=-o*l;e.style.transform=`translateX(${s}px)`,n.classList.toggle("disabled",0===l),c.classList.toggle("disabled",l>=t.length-r)}c.addEventListener("click",()=>{l<t.length-r&&(l++,s())}),n.addEventListener("click",()=>{l>0&&(l--,s())});let i=0,a=!1;e.addEventListener("touchstart",e=>{i=e.touches[0].clientX,a=!0}),e.addEventListener("touchmove",e=>{if(!a)return;const t=e.touches[0].clientX,n=i-t;Math.abs(n)>10&&e.preventDefault()},{passive:!1}),e.addEventListener("touchend",e=>{if(!a)return;a=!1;const n=e.changedTouches[0].clientX,c=i-n;c>50&&l<t.length-r?(l++,s()):c<-50&&l>0&&(l--,s())}),s()});const formHandle=()=>{alert("Вы подписались на нас!")},sizes=document.querySelectorAll(".header-size-variable");sizes.forEach(e=>{e.addEventListener("click",()=>{e.classList.contains("disabled")||(sizes.forEach(e=>e.classList.remove("filled")),e.classList.add("filled"))})});const colorsNike=document.querySelectorAll(".header-color-variable");colorsNike.forEach(e=>{e.addEventListener("click",()=>{e.classList.contains("checked")||(colorsNike.forEach(e=>e.classList.remove("checked")),e.classList.add("checked"))})});const imageList=["../images/header-banner1.png","../images/header-banner2.png","../images/header-banner3.png","../images/header-banner4.png"];let currentIndex=0;const mainImg=document.querySelector(".mainImg"),arrow=document.querySelector(".move-toggle-slider"),toggleImg=e=>{currentIndex=imageList.indexOf(e),mainImg.src=e};arrow.addEventListener("click",()=>{currentIndex=(currentIndex+1)%imageList.length,mainImg.src=imageList[currentIndex]}),document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".add-to-cart-circle");let t=JSON.parse(localStorage.getItem("cart"))||[];const n=t.reduce((e,t)=>e+t.quantity,0),c=t.reduce((e,t)=>e+function(e){return Number(e.replace(/[^\d]/g,""))}(t.newPrice)*t.quantity,0);document.getElementById("cart-count-products").textContent=n,document.getElementById("buy-box-count").textContent=n,document.getElementById("buy-box-cost").textContent=c,e.forEach(e=>{e.addEventListener("click",()=>{const t=e.closest(".slide"),n=t.querySelector("img").getAttribute("src"),c=t.querySelector("h6").textContent,o=t.querySelector(".slide-cost h5").textContent,r=t.querySelector(".slide-cost h6").textContent;!function(e){let t=JSON.parse(localStorage.getItem("cart"))||[];const n=t.reduce((e,t)=>e+t.quantity,0);if(n>=99)return void console.log("Нельзя добавить больше 99 товаров в корзину");const c=t.find(t=>t.title===e.title&&t.newPrice===e.newPrice);c?n+1<=99?(c.quantity+=1,console.log("Добавлено ещё 1 шт.")):alert("Нельзя добавить больше 99 товаров!"):(t.push(e),console.log("Товар добавлен в корзину"));localStorage.setItem("cart",JSON.stringify(t));const o=t.reduce((e,t)=>e+t.quantity,0);document.getElementById("cart-count-products").textContent=o}({id:Date.now().toString(),title:c,img:n,newPrice:o,oldPrice:r,quantity:1})})})});